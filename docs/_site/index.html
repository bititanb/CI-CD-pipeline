<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">

<!-- Begin Jekyll SEO tag v2.3.0 -->
<title>CI/CD демо | Полностью автоматизированное развертывание CI/CD с Kubernetes/Docker, Jenkins, Ansible.</title>
<meta property="og:title" content="CI/CD демо" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Полностью автоматизированное развертывание CI/CD с Kubernetes/Docker, Jenkins, Ansible." />
<meta property="og:description" content="Полностью автоматизированное развертывание CI/CD с Kubernetes/Docker, Jenkins, Ansible." />
<link rel="canonical" href="http://localhost:4000/" />
<meta property="og:url" content="http://localhost:4000/" />
<meta property="og:site_name" content="CI/CD демо" />
<script type="application/ld+json">
{"name":"CI/CD демо","description":"Полностью автоматизированное развертывание CI/CD с Kubernetes/Docker, Jenkins, Ansible.","author":null,"@type":"WebSite","url":"http://localhost:4000/","publisher":null,"image":null,"headline":"CI/CD демо","dateModified":null,"datePublished":null,"sameAs":null,"mainEntityOfPage":null,"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <meta name="description" content="Полностью автоматизированное развертывание CI/CD с Kubernetes/Docker, Jenkins, Ansible."/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/assets/css/style.css?v=4a71e28554640a473edece1b8c7407685a474b74">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">CI/CD демо</h1>
      <h2 class="project-tagline">Полностью автоматизированное развертывание CI/CD с Kubernetes/Docker, Jenkins, Ansible.</h2>
      
        <a href="http://github.com/bititanb/CI-CD-pipeline" class="btn"><img id="gh-icon" src="assets/img/002-github.svg" alt="Github Sign">&nbsp;&nbsp;main repo</a>
      
        <a href="https://github.com/bititanb/ansible-taskmngr" class="btn"><img id="gh-icon" src="assets/img/002-github.svg" alt="Github Sign">&nbsp;&nbsp;ansible</a>
        <a href="https://github.com/bititanb/taskmngr" class="btn"><img id="gh-icon" src="assets/img/002-github.svg" alt="Github Sign">&nbsp;&nbsp;application</a>
      
    </section>

    <section class="main-content">
      <p>baseurl: /CI-CD-pipeline</p>

<h2 id="что-это">Что это?</h2>

<p>Proof-of-Concept автоматизированного развертывания CI/CD и приложения в нём.<br />
Развертывание полностью автоматическое (<a href="https://github.com/bititanb/CI-CD-pipeline">быстрый старт с Vagrant</a>).
TODO [Быстрый старт]</p>

<h2 id="стек">Стек</h2>

<table>
  <tbody>
    <tr>
      <td>Vagrant/VirtualBox или Packer/KVM</td>
      <td>Создание VM</td>
    </tr>
    <tr>
      <td>Ansible</td>
      <td>Развертывание инфраструктуры И приложения</td>
    </tr>
    <tr>
      <td>Jenkins</td>
      <td>Сборка/тесты/деплой с использованием Ansible<a href="#ansible-note">*</a></td>
    </tr>
    <tr>
      <td>Kubernetes/Docker</td>
      <td>Контейнеризация приложения</td>
    </tr>
    <tr>
      <td>Zabbix</td>
      <td>Мониторинг</td>
    </tr>
    <tr>
      <td>ELK/Filebeat</td>
      <td>Логирование</td>
    </tr>
    <tr>
      <td>Django/Bootstrap/Postgres/Nginx</td>
      <td>Приложение</td>
    </tr>
  </tbody>
</table>

<p>Стек подобран просто по распространенности, некоторый софт я бы заменил.</p>

<h2 id="как-сделано">Как сделано?</h2>

<p>Развертывания инфраструктуры и, при новых коммитах, приложения:</p>

<p><img src="http://localhost:4000/assets/img/vagrantup.plain.svg" alt="Add Remove Programs" title="Add Remove Programs" />
<img src="/assets/img/vagrantup.plain.svg" alt="ERROR: Can't display image." /></p>

<p>Т. к. это демонстрация, некоторое сделано иначе/проще, чем должно быть. К примеру, само приложение и зависимые сервисы (БД, reverse proxy, почт. сервер) находятся в одном <a href="https://kubernetes.io/docs/concepts/workloads/pods/pod/#what-is-a-pod">kubernetes pod</a>, т.е. дублируются для каждой его реплики, при том БД контейнеризованы (что для боевых условий не годится).</p>

<p id="ansible-note">Но иногда были и просто плохие решения, как пример — Ansible-роль вместо Groovy/shell-скриптов для сборки/тестирования/деплоя (было настолько медленно, что пришлось отключить все зависимости от других ролей, а без этого Ansible не нужен). В подобных случаях, если переделывание требовало много времени, оставлял как есть, пока работает.</p>

<p>В целом, с оглядкой на то, что это демо, сделано прилично.</p>

<h2 id="как-это-выглядит">Как это выглядит</h2>

<p>4-х минутный монтаж развертывания с нуля и проверки работоспособности (в реальном времени ~30-40 минут на моей машине):</p>

<iframe src="https://player.vimeo.com/video/240532809" width="960" height="540" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe>

<h2 id="более-подробный-обзор">Более подробный обзор</h2>

<!-- <iframe width="960" height="740" marginheight="0" marginwidth="0" src="http://localhost:8000"> -->
<p><!-- Iframe can't be loaded. -->
<!-- </iframe> --></p>

<h2 id="быстрый-старт">Быстрый старт</h2>
<p>TODO</p>

<h2 id="github">Github</h2>
<p>TODO</p>

<!---
Text can be **bold**, _italic_, or ~~strikethrough~~.


[Link to another page](another-page).

There should be whitespace between paragraphs.

There should be whitespace between paragraphs. We recommend including a README, or a file with information about your project.

# [](#header-1)Header 1

This is a normal paragraph following a header. GitHub is a code hosting platform for version control and collaboration. It lets you and others work together on projects from anywhere.

## [](#header-2)Header 2

> This is a blockquote following a header.
>
> When something is important enough, you do it even if the odds are not in your favor.

### [](#header-3)Header 3

```js
// Javascript code with syntax highlighting.
var fun = function lang(l) {
  dateformat.i18n = require('./lang/' + l)
  return true;
}
```

```ruby
# Ruby code with syntax highlighting
GitHubPages::Dependencies.gems.each do |gem, version|
  s.add_dependency(gem, "= #{version}")
end
```

#### [](#header-4)Header 4

*   This is an unordered list following a header.
*   This is an unordered list following a header.
*   This is an unordered list following a header.

##### [](#header-5)Header 5

1.  This is an ordered list following a header.
2.  This is an ordered list following a header.
3.  This is an ordered list following a header.

###### [](#header-6)Header 6

| head1        | head two          | three |
|:-------------|:------------------|:------|
| ok           | good swedish fish | nice  |
| out of stock | good and plenty   | nice  |
| ok           | good `oreos`      | hmm   |
| ok           | good `zoute` drop | yumm  |

### There's a horizontal rule below this.

* * *

### Here is an unordered list:

*   Item foo
*   Item bar
*   Item baz
*   Item zip

### And an ordered list:

1.  Item one
1.  Item two
1.  Item three
1.  Item four

### And a nested list:

- level 1 item
  - level 2 item
  - level 2 item
    - level 3 item
    - level 3 item
- level 1 item
  - level 2 item
  - level 2 item
  - level 2 item
- level 1 item
  - level 2 item
  - level 2 item
- level 1 item

### Small image

![](https://assets-cdn.github.com/images/icons/emoji/octocat.png)

### Large image

![](https://guides.github.com/activities/hello-world/branching.png)


### Definition lists can be used with HTML syntax.

<dl>
<dt>Name</dt>
<dd>Godzilla</dd>
<dt>Born</dt>
<dd>1952</dd>
<dt>Birthplace</dt>
<dd>Japan</dd>
<dt>Color</dt>
<dd>Green</dd>
</dl>

```
Long, single-line code blocks should not wrap. They should horizontally scroll if they are too long. This line should be long enough to demonstrate this.
```

```
The final element.
```
-->



      <footer class="site-footer">
        
          <span class="site-footer-owner"><a href="http://github.com/bititanb/CI-CD-pipeline">CI-CD-pipeline</a> is maintained by <a href="http://github.com/bititanb">bititanb</a>.</span>
        
        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
      </footer>
    </section>

    
  </body>
</html>
